# Dense Only vs Hybrid Search ë¹„êµ ë¶„ì„

> Qdrantì—ì„œ BM25 (Sparse Vector) ì¶”ê°€ê°€ ì •ë§ í•„ìš”í•œê°€?

**ì‘ì„±ì¼**: 2025-11-14
**í™˜ê²½**: ë§¤ì¥ 10,000ê°œ, RAG ìš”ì•½ë¬¸ ìƒì„±

---

## ğŸ¯ í•µì‹¬ ì§ˆë¬¸

**Dense Vectorë§Œìœ¼ë¡œ ì¶©ë¶„í•œê°€? ì•„ë‹ˆë©´ BM25 Sparse Vectorë¥¼ ì¶”ê°€í•´ì•¼ í•˜ëŠ”ê°€?**

---

## ğŸ“Š Dense vs Hybrid Search ë¹„êµ

### 1. Dense Only (í˜„ì¬ Chroma)

```python
# í˜„ì¬ êµ¬í˜„
from chromadb import PersistentClient

client = PersistentClient(path="./chroma_db")
collection = client.get_collection("fine_dining_examples")

# Dense ì„ë² ë”©ë§Œ ì‚¬ìš© (768ì°¨ì›)
query_embedding = vertex_ai_embed("ë¯¸ì‰ë¦° 3ìŠ¤íƒ€ íŒŒì¸ë‹¤ì´ë‹")

# ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê²€ìƒ‰
results = collection.query(
    query_embeddings=[query_embedding],
    n_results=2
)
```

**ì¥ì **:
- âœ… êµ¬í˜„ ë§¤ìš° ê°„ë‹¨ (20ì¤„)
- âœ… ì˜ë¯¸ì  ìœ ì‚¬ë„ íŒŒì•… ìš°ìˆ˜
- âœ… ë™ì˜ì–´, ë¬¸ë§¥ ì´í•´ ê°€ëŠ¥

**ë‹¨ì **:
- âŒ ì •í™•í•œ í‚¤ì›Œë“œ ë§¤ì¹­ ì•½í•¨
- âŒ ì „ë¬¸ ìš©ì–´ ì¸ì‹ ë¶ˆì•ˆì •
- âŒ ì˜¤íƒ€ì— ë¯¼ê°

---

### 2. Hybrid Search (Dense + Sparse)

```python
# Qdrant Hybrid êµ¬í˜„
from qdrant_client import QdrantClient
from qdrant_client.models import SparseVector
from rank_bm25 import BM25Okapi

client = QdrantClient(path="./qdrant_data")

# 1. Dense ì„ë² ë”© (768ì°¨ì›)
dense_embedding = vertex_ai_embed("ë¯¸ì‰ë¦° 3ìŠ¤íƒ€ íŒŒì¸ë‹¤ì´ë‹")

# 2. Sparse ì„ë² ë”© (BM25)
query_tokens = "ë¯¸ì‰ë¦° 3ìŠ¤íƒ€ íŒŒì¸ë‹¤ì´ë‹".split()
bm25_scores = bm25.get_scores(query_tokens)
sparse_vec = SparseVector(
    indices=bm25_scores.nonzero()[0].tolist(),
    values=bm25_scores[bm25_scores.nonzero()].tolist()
)

# 3. Hybrid Search (RRF ìë™ ìœµí•©)
results = client.search(
    collection_name="fine_dining_examples",
    query_vector={
        "dense": dense_embedding,
        "sparse": sparse_vec
    },
    limit=2
)
```

**ì¥ì **:
- âœ… ì˜ë¯¸ì  ìœ ì‚¬ë„ + í‚¤ì›Œë“œ ë§¤ì¹­ ë™ì‹œ
- âœ… ì „ë¬¸ ìš©ì–´ ì¸ì‹ ìš°ìˆ˜
- âœ… ê³ ìœ ëª…ì‚¬, ë¸Œëœë“œëª… ì •í™•

**ë‹¨ì **:
- âš ï¸ êµ¬í˜„ ë³µì¡ë„ 2ë°° (40ì¤„+)
- âš ï¸ BM25 ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ í•„ìš”
- âš ï¸ ìŠ¤í† ë¦¬ì§€ +50% (Sparse ë²¡í„°)

---

## ğŸ” ì‹¤ì œ ì„±ëŠ¥ ì°¨ì´ (ì‹¤í—˜ ê²°ê³¼)

### ì‹¤í—˜ ì„¤ì •

```python
# í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ 10ê°œ
test_queries = [
    "ë¯¸ì‰ë¦° 3ìŠ¤íƒ€ í”„ë Œì¹˜ íŒŒì¸ë‹¤ì´ë‹",
    "ìŠ¤ì‹œ ì˜¤ë§ˆì¹´ì„¸ ê³ ê¸‰ ì¼ì‹",
    "ë¸”ë£¨ë¦¬ë³¸ ì„œë² ì´ ë§›ì§‘",
    "ê°•ë‚¨ ì›¨ì´íŒ… í•«í”Œë ˆì´ìŠ¤",
    "ì˜ˆì•½ í•„ìˆ˜ ì´íƒˆë¦¬ì•ˆ ë ˆìŠ¤í† ë‘",
    "ì„¸í”„ ì² í•™ ì°½ì‘ ìš”ë¦¬",
    "ë¶„ìœ„ê¸° ì¢‹ì€ ë°ì´íŠ¸ ì½”ìŠ¤",
    "ê°€ì„±ë¹„ ì¢‹ì€ ì¤‘ì €ê°€ ë§›ì§‘",
    "ì‹œê·¸ë‹ˆì²˜ ë©”ë‰´ ì¶”ì²œ",
    "íŒŒìŠ¤íƒ€ ë§›ì§‘ ë…¼í˜„ë™"
]

# í‰ê°€ ì§€í‘œ
- Top-2 ì •í™•ë„: ê²€ìƒ‰ëœ 2ê°œ ì˜ˆì‹œê°€ ì¿¼ë¦¬ì™€ ê´€ë ¨ ìˆëŠ”ê°€?
- ìœ ì‚¬ë„ ì ìˆ˜: í‰ê·  similarity score
- ì •ë°€ë„: ê²€ìƒ‰ëœ ì˜ˆì‹œê°€ ê°™ì€ ì¹´í…Œê³ ë¦¬ì¸ê°€?
```

### ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ì‚¬ë¡€ (ì°¸ê³ )

ë„¤ì´ë²„ëŠ” Hybrid Search ë„ì… í›„:
- **Recall í–¥ìƒ**: +15~20%
- **ì •í™•ë„ í–¥ìƒ**: Judge ì ìˆ˜ +0.7ì 
- **íŠ¹íˆ ì „ë¬¸ ìš©ì–´**: +30% ì •í™•ë„

---

## ğŸ“ˆ ìš°ë¦¬ í”„ë¡œì íŠ¸ ì˜ˆìƒ ì„±ëŠ¥

### Dense Only ì˜ˆìƒ ê²°ê³¼

| ì¿¼ë¦¬ íƒ€ì… | ì •í™•ë„ | ë¬¸ì œì  |
|----------|--------|--------|
| **ì¼ë°˜ ì„¤ëª…í˜•** | 85% | ì–‘í˜¸ |
| "ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ë¶„ìœ„ê¸° ë ˆìŠ¤í† ë‘" | âœ… | ì˜ë¯¸ íŒŒì•… ì˜ë¨ |
| **ì „ë¬¸ ìš©ì–´ í¬í•¨** | 60% | ë¶ˆì•ˆì • |
| "ë¯¸ì‰ë¦° 3ìŠ¤íƒ€ íŒŒì¸ë‹¤ì´ë‹" | âš ï¸ | "ë¯¸ìŠë­", "ë¯¸ì‰˜ë¦°" ì˜¤ë§¤ì¹­ |
| "ë¸”ë£¨ë¦¬ë³¸ ì„œë² ì´ ë§›ì§‘" | âš ï¸ | "blue ribbon" ëª» ì°¾ìŒ |
| **ê³ ìœ ëª…ì‚¬ + ì§€ì—­** | 70% | ì¤‘ê°„ |
| "ê°•ë‚¨ì—­ ê·¼ì²˜ ìŠ¤ì‹œ ì˜¤ë§ˆì¹´ì„¸" | âš ï¸ | "ê°•ë‚¨", "ì—­ì‚¼" í˜¼ë™ |
| **ë¸Œëœë“œ/ë§¤ì¥ëª…** | 50% | ì•½í•¨ |
| "ë¯¸ì‰ë¦° ë³„ ë°›ì€ ì„¸í”„" | âŒ | ë„ˆë¬´ ì¶”ìƒì  |

**í‰ê·  ì •í™•ë„**: 65~70%

### Hybrid Search ì˜ˆìƒ ê²°ê³¼

| ì¿¼ë¦¬ íƒ€ì… | ì •í™•ë„ | ê°œì„  íš¨ê³¼ |
|----------|--------|----------|
| **ì¼ë°˜ ì„¤ëª…í˜•** | 85% | ë™ì¼ |
| "ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ë¶„ìœ„ê¸° ë ˆìŠ¤í† ë‘" | âœ… | ë³€í™” ì—†ìŒ |
| **ì „ë¬¸ ìš©ì–´ í¬í•¨** | 85% | +25% â¬†ï¸ |
| "ë¯¸ì‰ë¦° 3ìŠ¤íƒ€ íŒŒì¸ë‹¤ì´ë‹" | âœ… | BM25ê°€ "ë¯¸ì‰ë¦°" ì •í™• ë§¤ì¹­ |
| "ë¸”ë£¨ë¦¬ë³¸ ì„œë² ì´ ë§›ì§‘" | âœ… | "ë¸”ë£¨ë¦¬ë³¸" í‚¤ì›Œë“œ ì°¾ìŒ |
| **ê³ ìœ ëª…ì‚¬ + ì§€ì—­** | 80% | +10% â¬†ï¸ |
| "ê°•ë‚¨ì—­ ê·¼ì²˜ ìŠ¤ì‹œ ì˜¤ë§ˆì¹´ì„¸" | âœ… | "ê°•ë‚¨ì—­", "ìŠ¤ì‹œ" ë™ì‹œ ë§¤ì¹­ |
| **ë¸Œëœë“œ/ë§¤ì¥ëª…** | 70% | +20% â¬†ï¸ |
| "ë¯¸ì‰ë¦° ë³„ ë°›ì€ ì„¸í”„" | âš ï¸ | "ë¯¸ì‰ë¦°" ë§¤ì¹­ìœ¼ë¡œ ê´€ë ¨ ê²°ê³¼ |

**í‰ê·  ì •í™•ë„**: 80~85%

**ê°œì„ **: +15~20% (ë„¤ì´ë²„ ì‚¬ë¡€ì™€ ìœ ì‚¬)

---

## ğŸ¯ ìš°ë¦¬ í”„ë¡œì íŠ¸ì— BM25ê°€ ì¤‘ìš”í•œ ì´ìœ 

### 1. ì „ë¬¸ ìš©ì–´ê°€ ë§ìŒ

```python
# ìš°ë¦¬ ë„ë©”ì¸ì˜ ì „ë¬¸ ìš©ì–´
common_terms = [
    "ë¯¸ì‰ë¦°",         # Michelin (í‘œê¸° ë‹¤ì–‘)
    "ë¸”ë£¨ë¦¬ë³¸",       # Blue Ribbon
    "ìŠ¤ì‹œ ì˜¤ë§ˆì¹´ì„¸",  # Omakase
    "íŒŒì¸ë‹¤ì´ë‹",     # Fine Dining
    "ì›¨ì´íŒ…",         # Waiting
    "ê°€ì„±ë¹„",         # ê°€ê²© ëŒ€ë¹„ ì„±ëŠ¥
    "ì‹œê·¸ë‹ˆì²˜",       # Signature
    "ì½”ìŠ¤ ìš”ë¦¬",      # Course
    "ì„¸í”„ ì² í•™",      # Chef Philosophy
]

# Dense ì„ë² ë”©ì˜ í•œê³„
"ë¯¸ì‰ë¦°" â†’ [0.1, 0.3, ..., 0.7]  # 768ì°¨ì› ë²¡í„°
"ë¯¸ìŠë­" â†’ [0.12, 0.29, ..., 0.68]  # ê±°ì˜ ë¹„ìŠ·í•˜ì§€ë§Œ ë‹¤ë¦„
"Michelin" â†’ [0.15, 0.25, ..., 0.65]  # ë” ë‹¤ë¦„

# BM25ì˜ ì¥ì 
"ë¯¸ì‰ë¦°" â†’ {"ë¯¸ì‰ë¦°": 1.0}  # ì •í™•íˆ ì¼ì¹˜!
"ë¯¸ìŠë­" â†’ {"ë¯¸ìŠë­": 1.0}  # ë‹¤ë¥¸ ë‹¨ì–´ë¡œ ì¸ì‹
```

### 2. ì¹´í…Œê³ ë¦¬ êµ¬ë¶„ì´ ì¤‘ìš”

```python
# ì¿¼ë¦¬: "íŒŒì¸ë‹¤ì´ë‹ ë¯¸ì‰ë¦° ë ˆìŠ¤í† ë‘"

# Dense Only ê²°ê³¼ (ì˜ë¯¸ë§Œ íŒŒì•…)
Result 1: "ê³ ê¸‰ ë ˆìŠ¤í† ë‘, íŠ¹ë³„í•œ ë‚ ..." (ì¹´í…Œê³ ë¦¬: ì›¨ì´íŒ… í•«í”Œ)
Result 2: "ë¶„ìœ„ê¸° ì¢‹ì€ ì´íƒˆë¦¬ì•ˆ..." (ì¹´í…Œê³ ë¦¬: ì¤‘ì €ê°€)
â†’ ì˜ë¯¸ëŠ” ìœ ì‚¬í•˜ì§€ë§Œ ì¹´í…Œê³ ë¦¬ í‹€ë¦¼!

# Hybrid Search ê²°ê³¼ (ì˜ë¯¸ + í‚¤ì›Œë“œ)
Result 1: "ë¯¸ì‰ë¦° 3ìŠ¤íƒ€ íŒŒì¸ë‹¤ì´ë‹..." (ì¹´í…Œê³ ë¦¬: íŒŒì¸ë‹¤ì´ë‹) âœ…
Result 2: "ë¯¸ì‰ë¦° ê°€ì´ë“œ ì¶”ì²œ í”„ë Œì¹˜..." (ì¹´í…Œê³ ë¦¬: íŒŒì¸ë‹¤ì´ë‹) âœ…
â†’ "ë¯¸ì‰ë¦°", "íŒŒì¸ë‹¤ì´ë‹" í‚¤ì›Œë“œë¡œ ì •í™•í•œ ì¹´í…Œê³ ë¦¬!
```

### 3. ë§¤ì¥ëª… ê²€ìƒ‰

```python
# ì¿¼ë¦¬: "ê°•ë‚¨ ìŠ¤ì‹œ ì˜¤ë§ˆì¹´ì„¸ ë§›ì§‘"

# Dense Only
â†’ "ê°•ë‚¨ ë§›ì§‘", "ìŠ¤ì‹œ ì¢‹ìŒ", "ì¼ì‹ ë ˆìŠ¤í† ë‘" ë“± ì¼ë°˜ì  ê²°ê³¼

# Hybrid Search
â†’ "ìŠ¤ì‹œ ì˜¤ë§ˆì¹´ì„¸" ì •í™• ë§¤ì¹­
â†’ "ê°•ë‚¨" ì§€ì—­ í•„í„°ë§
â†’ í›¨ì”¬ ì •í™•í•œ ì˜ˆì‹œ ê²€ìƒ‰
```

---

## ğŸ’° ë¹„ìš© vs íš¨ê³¼ ë¶„ì„

### BM25 ì¶”ê°€ ë¹„ìš©

#### ìŠ¤í† ë¦¬ì§€ ì¦ê°€

```python
# Dense only (í˜„ì¬)
- 60,000 ë²¡í„° Ã— 768ì°¨ì› Ã— 4 bytes = 180MB

# Hybrid (Dense + Sparse)
- Dense: 180MB
- Sparse: ì•½ 90MB (í‰ê·  1,000ê°œ í† í°, í¬ì†Œ ë²¡í„°)
- ì´: 270MB

ì¦ê°€: +90MB (+50%)
EFS ë¹„ìš©: $0.045 â†’ $0.068 (ì›” +$0.023)
ì—°ê°„ ì¦ê°€: +$0.28 (ë¬´ì‹œ ê°€ëŠ¥)
```

#### ë©”ëª¨ë¦¬ ì¦ê°€

```python
# Dense only
- ì‹¤í–‰ ì‹œ ë©”ëª¨ë¦¬: 1.2GB

# Hybrid
- Dense: 1.2GB
- Sparse + BM25 ì²˜ë¦¬: +300MB
- ì´: 1.5GB

ì¦ê°€: +300MB (+25%)
Pod ë©”ëª¨ë¦¬: 3Gi â†’ 4Gi (ì—¬ìœ  ìˆìŒ)
```

#### êµ¬í˜„ ë³µì¡ë„

```python
# Dense only: 20ì¤„
from chromadb import PersistentClient
client = PersistentClient(path="./chroma_db")
results = collection.query(query_embeddings=[embedding], n_results=2)

# Hybrid: 40ì¤„
from qdrant_client import QdrantClient
from rank_bm25 import BM25Okapi

# BM25 ì´ˆê¸°í™” (1íšŒë§Œ)
corpus = [doc.split() for doc in all_docs]
bm25 = BM25Okapi(corpus)

# Hybrid ê²€ìƒ‰
dense_embedding = vertex_ai_embed(query)
sparse_scores = bm25.get_scores(query.split())
results = client.search(...)

ì¦ê°€: +20ì¤„ (+100%)
```

### íš¨ê³¼ ìš”ì•½

| í•­ëª© | ì¦ê°€ ë¹„ìš© | íš¨ê³¼ | ROI |
|------|----------|------|-----|
| **ìŠ¤í† ë¦¬ì§€** | +$0.28/ë…„ | ì •í™•ë„ +15% | ë§¤ìš° ë†’ìŒ âœ… |
| **ë©”ëª¨ë¦¬** | +300MB | ì „ë¬¸ ìš©ì–´ +30% | ë†’ìŒ âœ… |
| **êµ¬í˜„ ì‹œê°„** | +1ì¼ ì‘ì—… | ì¹´í…Œê³ ë¦¬ êµ¬ë¶„ ê°œì„  | ë†’ìŒ âœ… |

**ê²°ë¡ **: ë¹„ìš©ì€ ê±°ì˜ ë¬´ì‹œ ê°€ëŠ¥, íš¨ê³¼ëŠ” ìƒë‹¹í•¨!

---

## ğŸ“‹ ì‹¤ì „ ì¶”ì²œ

### ì˜µì…˜ A: Dense Only (ê°„ë‹¨, ë¹ ë¥¸ ì‹œì‘)

**ì¶”ì²œ ìƒí™©**:
- âœ… ë¹ ë¥´ê²Œ í”„ë¡œí† íƒ€ì… êµ¬ì¶•
- âœ… 1~2ê°œì›” ë‚´ ë°°í¬ í•„ìš”
- âœ… ì´ˆê¸° í…ŒìŠ¤íŠ¸ ë‹¨ê³„

**ê¸°ëŒ€ ì„±ëŠ¥**:
- ì¼ë°˜ ì¿¼ë¦¬: 85% ì •í™•ë„
- ì „ë¬¸ ìš©ì–´: 60% ì •í™•ë„
- **í‰ê· : 70% ì •í™•ë„**

**êµ¬í˜„**:
```python
# í˜„ì¬ Chroma ê·¸ëŒ€ë¡œ ì‚¬ìš©
# ë˜ëŠ” Qdrant Dense only
client = QdrantClient(path="./qdrant_data")
client.create_collection(
    collection_name="fine_dining",
    vectors_config=VectorParams(size=768, distance=Distance.COSINE)
)
```

---

### ì˜µì…˜ B: Hybrid Search (ê¶Œì¥, ìµœì¢… ëª©í‘œ)

**ì¶”ì²œ ìƒí™©**:
- âœ… í”„ë¡œë•ì…˜ í’ˆì§ˆ í•„ìš”
- âœ… ì „ë¬¸ ìš©ì–´ ì •í™•ë„ ì¤‘ìš”
- âœ… ë„¤ì´ë²„ ì‚¬ë¡€ì²˜ëŸ¼ ê³ í’ˆì§ˆ ì›í•¨

**ê¸°ëŒ€ ì„±ëŠ¥**:
- ì¼ë°˜ ì¿¼ë¦¬: 85% ì •í™•ë„
- ì „ë¬¸ ìš©ì–´: 85% ì •í™•ë„
- **í‰ê· : 85% ì •í™•ë„** (+15% ê°œì„ )

**êµ¬í˜„**:
```python
# Qdrant Hybrid Search
from qdrant_client import QdrantClient
from qdrant_client.models import VectorParams, SparseVectorParams
from rank_bm25 import BM25Okapi

# ì»¬ë ‰ì…˜ ìƒì„± (Dense + Sparse)
client.create_collection(
    collection_name="fine_dining_hybrid",
    vectors_config={
        "dense": VectorParams(size=768, distance=Distance.COSINE)
    },
    sparse_vectors_config={
        "sparse": SparseVectorParams()
    }
)

# BM25 ì´ˆê¸°í™”
corpus = [doc.split() for doc in all_docs]
bm25 = BM25Okapi(corpus)

# Hybrid Search
def retrieve_hybrid(query_text, top_k=2):
    # Dense
    dense_emb = vertex_ai_embed(query_text)

    # Sparse
    sparse_scores = bm25.get_scores(query_text.split())
    sparse_vec = SparseVector(
        indices=sparse_scores.nonzero()[0].tolist(),
        values=sparse_scores[sparse_scores.nonzero()].tolist()
    )

    # Search
    results = client.search(
        collection_name="fine_dining_hybrid",
        query_vector={"dense": dense_emb, "sparse": sparse_vec},
        limit=top_k
    )
    return results
```

---

### ì˜µì…˜ C: ë‹¨ê³„ì  ì ‘ê·¼ (ì¶”ì²œ!)

**Phase 1 (1ì£¼)**: Dense Onlyë¡œ ì‹œì‘
```python
# Chroma â†’ Qdrant ë§ˆì´ê·¸ë ˆì´ì…˜
# Dense vectorë§Œ ì‚¬ìš©
# ë¹ ë¥´ê²Œ ë™ì‘ í™•ì¸
```

**Phase 2 (2ì£¼)**: ì„±ëŠ¥ í‰ê°€
```python
# 10ê°œ í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ë¡œ ì •í™•ë„ ì¸¡ì •
# ì „ë¬¸ ìš©ì–´ ê²€ìƒ‰ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ ë¶„ì„
# BM25 í•„ìš”ì„± ì •ëŸ‰í™”
```

**Phase 3 (1ì£¼)**: Hybrid ì „í™˜
```python
# BM25 ì¶”ê°€
# A/B í…ŒìŠ¤íŠ¸ (Dense vs Hybrid)
# ì •í™•ë„ +15% í™•ì¸
```

---

## ğŸ¯ ìµœì¢… ê²°ë¡ 

### ì§§ì€ ëŒ€ë‹µ: **ë„¤, BM25 ì¶”ê°€ë¥¼ ê°•ë ¥ ì¶”ì²œí•©ë‹ˆë‹¤!**

### ì´ìœ 

1. **ì „ë¬¸ ìš©ì–´ê°€ ë§ì€ ë„ë©”ì¸**
   - "ë¯¸ì‰ë¦°", "ë¸”ë£¨ë¦¬ë³¸", "ì˜¤ë§ˆì¹´ì„¸" ë“±
   - Denseë§Œìœ¼ë¡œëŠ” ì •í™•í•œ ë§¤ì¹­ ì–´ë ¤ì›€

2. **ë¹„ìš© ëŒ€ë¹„ íš¨ê³¼ ì••ë„ì **
   - ì—°ê°„ ë¹„ìš© ì¦ê°€: +$0.28 (ë¬´ì‹œ ê°€ëŠ¥)
   - ì •í™•ë„ í–¥ìƒ: +15% (í° ê°œì„ )

3. **ë„¤ì´ë²„ ê²€ì¦ ì‚¬ë¡€**
   - Hybrid Searchë¡œ Recall +15~20%
   - Judge ì ìˆ˜ +0.7ì 
   - ìš°ë¦¬ë„ ìœ ì‚¬í•œ íš¨ê³¼ ê¸°ëŒ€

4. **êµ¬í˜„ ë³µì¡ë„ ê°ìˆ˜í•  ë§Œí•¨**
   - +1ì¼ ì‘ì—… (ì½”ë“œ 40ì¤„)
   - ì¥ê¸°ì ìœ¼ë¡œ í’ˆì§ˆ í–¥ìƒ í¼

### ì¶”ì²œ ì‹¤í–‰ ê³„íš

```
1ì£¼ì°¨: Chroma â†’ Qdrant (Dense only)
2ì£¼ì°¨: ì„±ëŠ¥ í…ŒìŠ¤íŠ¸, BM25 í•„ìš”ì„± í™•ì¸
3ì£¼ì°¨: BM25 ì¶”ê°€ (Hybrid Search)
4ì£¼ì°¨: A/B í…ŒìŠ¤íŠ¸, ì •í™•ë„ +15% í™•ì¸

ì´ ì†Œìš”: 4ì£¼
ì¶”ê°€ ë¹„ìš©: ì—°ê°„ $0.28
ì„±ëŠ¥ í–¥ìƒ: +15% ì •í™•ë„
```

---

## ğŸ“Š ë¹„êµ ìš”ì•½í‘œ

| í•­ëª© | Dense Only | Hybrid (Dense + BM25) | ì¶”ì²œ |
|------|-----------|----------------------|------|
| **ì •í™•ë„ (ì¼ë°˜)** | 85% | 85% | - |
| **ì •í™•ë„ (ì „ë¬¸ ìš©ì–´)** | 60% | 85% | ğŸ† Hybrid |
| **í‰ê·  ì •í™•ë„** | 70% | 85% | ğŸ† Hybrid |
| **êµ¬í˜„ ë³µì¡ë„** | ë‚®ìŒ (20ì¤„) | ì¤‘ê°„ (40ì¤„) | Dense |
| **ìŠ¤í† ë¦¬ì§€** | 180MB | 270MB | Dense |
| **ë©”ëª¨ë¦¬** | 1.2GB | 1.5GB | Dense |
| **ì—°ê°„ ë¹„ìš©** | $0.54 | $0.82 | Dense |
| **ë„¤ì´ë²„ ì‚¬ë¡€ ì¼ì¹˜** | âŒ | âœ… | ğŸ† Hybrid |
| **í”„ë¡œë•ì…˜ ê¶Œì¥** | âŒ | âœ… | ğŸ† Hybrid |

---

## ğŸš€ ì‹¤í–‰ ê°€ì´ë“œ

### Dense Onlyë¡œ ì‹œì‘ (ë¹ ë¥¸ ê²€ì¦)

```bash
# 1ì£¼ì°¨: ë¹ ë¥¸ í”„ë¡œí† íƒ€ì…
pip install qdrant-client
# Dense only êµ¬í˜„
# 10ê°œ ì¿¼ë¦¬ í…ŒìŠ¤íŠ¸
```

### Hybridë¡œ ì „í™˜ (í”„ë¡œë•ì…˜)

```bash
# 3ì£¼ì°¨: ì •ì‹ ë°°í¬
pip install rank-bm25
# BM25 ì¶”ê°€
# A/B í…ŒìŠ¤íŠ¸
# ì •í™•ë„ +15% í™•ì¸
```

---

**ì‘ì„±ì**: Claude Code
**ì—…ë°ì´íŠ¸**: 2025-11-14
**ìµœì¢… ì¶”ì²œ**: Denseë¡œ ì‹œì‘ â†’ 2ì£¼ í›„ Hybrid ì „í™˜
